<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Motorcycle Parking - FINDPARKING</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    background: linear-gradient(to right, #e0f7fa, #b2ebf2);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding-bottom: 80px;
}
.header {
    width:100%;
    background:#00796b;
    color:white;
    text-align:center;
    padding:15px 0;
    font-size:2em;
    font-weight:bold;
    box-shadow:0 3px 10px rgba(0,0,0,0.15);
}
.top-section {
    display:flex;
    flex-wrap:wrap;
    justify-content:space-between;
    align-items:center;
    width:100%;
    max-width:1000px;
    padding:20px;
    gap:10px;
}
.title-container h1 { font-size:2.5em; color:#004d40; font-weight:700; }
.title-container h2 { font-size:1.2em; color:#004d40; font-weight:500; margin-top:5px; }
.search-bar {
    display:flex;
    align-items:center;
    background:white;
    border-radius:50px;
    padding:5px 15px;
    flex-grow:1;
    max-width:250px;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
.search-bar input {
    flex-grow:1;
    border:none;
    outline:none;
    padding:8px;
    font-size:0.95em;
    color:#444;
}
.search-bar .icon { font-size:1.2em; color:#00796b; margin-right:5px; }
.back-btn, .edit-btn {
    padding:10px 20px;
    border-radius:50px;
    border:none;
    font-weight:bold;
    cursor:pointer;
    font-size:1em;
    transition:0.3s;
    text-decoration:none;
    color:white;
}
.back-btn { background:#00796b; }
.back-btn:hover { background:#004d40; }
.edit-btn { background:#4caf50; margin-left:10px; }
.edit-btn:hover { background:#388e3c; }
.status-bar {
    width:100%;
    max-width:1000px;
    background:#b2ebf2;
    display:flex;
    justify-content:space-around;
    font-weight:bold;
    font-size:1.1em;
    padding:10px 0;
    margin-bottom:20px;
    border-radius:20px;
    box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.slot-container {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
    width:100%;
    max-width:1000px;
    padding:0 20px;
    margin-bottom:60px;
}
.slot {
    background: linear-gradient(145deg, #00bcd4, #26c6da);
    border-radius: 30px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: 0.3s;
    position: relative;
    color: white;
    box-shadow: 0 6px 15px rgba(0,0,0,0.2);
}
.slot:hover {
    transform: translateY(-5px);
    background: linear-gradient(145deg, #0097a7, #00acc1);
}
.slot-header {
    background: rgba(0,0,0,0.2);
    padding: 8px 15px;
    border-radius: 20px;
    margin-bottom: 10px;
    font-weight: bold;
    font-size: 1.2em;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
}
.slot-header .status-icon {
    width: 12px; height: 12px; border-radius: 50%;
}
.slot.accepted .status-icon { background: #4caf50; }
.slot.pending .status-icon { background: #fbc02d; }
.slot.empty .status-icon { background: #ffffff; }
.slot img { width: 100px; margin-bottom: 10px; border-radius: 10px; }
.slot-name { font-size:1.3em; font-weight:bold; margin-bottom:5px; }
.slot-plate { font-weight:bold; margin-bottom:10px; color:#f0f0f0; }
.use-btn {
    padding:6px 15px; border-radius:50px; border:none;
    font-weight:bold; cursor:pointer; font-size:0.9em; transition:0.3s;
}
.slot.pending .use-btn { background:#757575; color:white; }
.slot:not(.pending):not(.accepted) .use-btn { background:#00796b; color:white; }
.slot .use-btn:hover { opacity:0.85; }
.footer {
    position:fixed;
    bottom:0;
    width:100%;
    background:#00796b;
    padding:20px 0;
    text-align:center;
    font-weight:bold;
    color:white;
    font-size:1.2em;
    box-shadow:0 -3px 10px rgba(0,0,0,0.15);
}
</style>
</head>
<body>

<div class="header">MOTORCYCLE PARKING</div>

<div class="top-section">
    <div class="title-container">
        <h1>MOTORCYCLE PARKING</h1>
        <h2>FIND PARKING</h2>
    </div>
    <div style="display:flex; align-items:center; gap:10px; flex-grow:1; max-width:400px;">
        <div class="search-bar">
            <span class="icon">üîç</span>
            <input type="text" id="search-input" placeholder="Search Slot Parking" onkeyup="filterSlots()">
        </div>
        <select id="status-filter" onchange="filterSlots()" style="padding:8px 12px; border-radius:50px; border:1px solid #ccc; outline:none; font-size:0.95em;">
            <option value="all">All Status</option>
            <option value="empty">Empty</option>
            <option value="pending">Pending</option>
            <option value="accepted">Accepted</option>
        </select>
    </div>
    <div>
        <button class="back-btn" onclick="location.href='/back_to_menu'">BACK</button>
        {% if is_manager %}
            <a href="/edit_slot/motorcycle" class="edit-btn">EDIT</a>
        {% endif %}
    </div>
</div>

<div class="status-bar">
    <div>SLOT PARKING: {{ total_slots }}</div>
    <div>USED SLOT: {{ used_slots }}</div>
    <div>EMPTY SLOT: {{ empty_slots }}</div>
</div>

<div class="slot-container">
    {% for id, slot in slots.items() %}
        <div class="slot {% if slot.status=='accepted' %}accepted{% elif slot.status=='pending' %}pending{% else %}empty{% endif %}" 
             data-url="{% if slot.status=='accepted' %}/slot_detail/motorcycle/{{ id }}{% else %}/use_slot/motorcycle/{{ id }}{% endif %}">
            <div class="slot-header">
                <span class="status-icon"></span>
                SLOT {{ id }} {% if slot.status=='accepted' %}USED{% elif slot.status=='pending' %}PENDING{% else %}EMPTY{% endif %}
            </div>
            {% if slot.status != 'empty' %}
                <img src="{{ url_for('static', filename='motor.png') }}" alt="Motorcycle">
                <div class="slot-plate">{{ slot.plate }}</div>
            {% endif %}
            {% if slot.status != 'accepted' %}
                {% if is_manager %}
                    <button class="use-btn">ACCEPT</button>
                {% else %}
                    <button class="use-btn">USE</button>
                {% endif %}
            {% endif %}
        </div>
    {% endfor %}
</div>

<div class="footer">FIND PARKING - MOTORCYCLE SLOT</div>

<script>
// Klik slot tapi bukan tombol
document.querySelectorAll('.slot').forEach(slot => {
    slot.addEventListener('click', e => {
        if(!e.target.classList.contains('use-btn')) {
            window.location.href = slot.dataset.url;
        }
    });
});

// Search + status filter
function filterSlots() {
    const input = document.getElementById('search-input').value.toLowerCase().trim();
    const statusFilter = document.getElementById('status-filter').value;

    document.querySelectorAll('.slot').forEach(slot => {
        const name = slot.querySelector('.slot-header').textContent.toLowerCase();
        const plate = slot.querySelector('.slot-plate')?.textContent.toLowerCase() || '';
        const status = slot.classList.contains('empty') ? 'empty' :
                       slot.classList.contains('pending') ? 'pending' :
                       slot.classList.contains('accepted') ? 'accepted' : '';

        const matchesSearch = name.includes(input) || plate.includes(input);
        const matchesStatus = statusFilter === 'all' || status === statusFilter;

        slot.style.display = (matchesSearch && matchesStatus) ? 'block' : 'none';
    });
}
</script>

</body>
</html>
